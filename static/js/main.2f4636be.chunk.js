(this["webpackJsonpmatrix-bundler"]=this["webpackJsonpmatrix-bundler"]||[]).push([[0],{10:function(t,e,n){t.exports={matrixForm__text:"SettingField_matrixForm__text__10d4q",matrixForm__input:"SettingField_matrixForm__input__5OS3P",matrixForm__block:"SettingField_matrixForm__block__2JT5L"}},13:function(t,e,n){t.exports={row__th:"AvgRow_row__th__2Q_v_"}},16:function(t,e,n){t.exports={addRowBtn:"MatrixTable_addRowBtn__yw-P5"}},17:function(t,e,n){t.exports={row__button:"MatrixRow_row__button__quKHv",row__th:"MatrixRow_row__th__3n-Ry"}},23:function(t,e,n){},30:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(6),o=n.n(c),a=(n(23),n(2)),i=(n(30),n(3)),u=n(9),s=n.n(u),l=n(14),m=n(4),d=n(8),b=n(18),j=function(t,e){for(var n=[],r=0;r<t;r++)n=[].concat(Object(m.a)(n),[[]]);return n.map((function(t){return new Array(e).fill(null).map((function(t){return{id:Object(b.a)(),amount:Math.floor(900*Math.random()+100)}}))}))},x=function(t,e){if(!e)return 0;var n="number"===typeof t?t:t.amount;return Math.floor(100*n/e)},f=Object(d.b)({name:"matrix",initialState:{matrix:[],rows:0,columns:0,cells:0,closestIdsArr:[]},reducers:{setMatrixSettings:function(t,e){var n=e.payload,r=n.rows,c=n.columns,o=n.cells,a=j(r,c);t.rows=r,t.columns=c,t.cells=o,t.matrix=a},addRow:function(t,e){var n,r=j(1,e.payload);(n=t.matrix).push.apply(n,Object(m.a)(r))},deleteRow:function(t,e){var n=t.matrix.filter((function(t,n){return n!==e.payload}));t.matrix=n},incrementCell:function(t,e){var n=t.matrix.map((function(t){return t.map((function(t){return t.id.toString().toLowerCase()===e.payload.toString().toLowerCase()?Object(l.a)(Object(l.a)({},t),{},{amount:t.amount+1}):t}))}));t.matrix=n},onCellLeave:function(t,e){t.closestIdsArr=[]},onCellHover:function(t,e){for(var n=t.matrix.flat(),r=[],c=function(t){r=[].concat(Object(m.a)(r),[n.reduce((function(t,n){return Math.abs(n.amount-e.payload.amount)<Math.abs(t.amount-e.payload.amount)?n:t}),n[0])]),n.splice(n.findIndex((function(e){return e.id===r[t].id})),1)},o=0;o<t.cells;o++)c(o);t.closestIdsArr=r}}}),_=n(10),h=n.n(_),O=n(0),p=function(t){var e=t.title,n=t.value,r=t.changeHandler;return Object(O.jsxs)("div",{className:h.a.matrixForm__block,children:[Object(O.jsx)("span",{className:h.a.matrixForm__text,children:e}),Object(O.jsx)("input",{value:n||"",onChange:function(t){return r(+t.target.value)},className:h.a.matrixForm__input,type:"number",min:"1",max:"99"})]})},w=function(){var t=Object(r.useState)(0),e=Object(i.a)(t,2),n=e[0],c=e[1],o=Object(r.useState)(0),u=Object(i.a)(o,2),l=u[0],m=u[1],d=Object(r.useState)(0),b=Object(i.a)(d,2),j=b[0],x=b[1],_=f.actions.setMatrixSettings,h=Object(a.b)();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:s.a.matrixForm,children:[Object(O.jsx)("h2",{className:s.a.matrixForm__title,children:"Matrix builder"}),Object(O.jsx)(p,{title:"Enter the number of columns",value:n,changeHandler:function(t){return c(t)}}),Object(O.jsx)(p,{title:"Enter the number of rows",value:l,changeHandler:function(t){return m(t)}}),Object(O.jsx)(p,{title:"Enter the number of cells",value:j,changeHandler:function(t){return x(t)}}),Object(O.jsx)("button",{className:s.a.matrixForm__button,onClick:function(){n&&l&&h(_({rows:l,columns:n,cells:j}))},type:"button",children:"Create matrix"})]})})},v=function(){var t=Object(a.c)((function(t){return t.matrixReducer.matrix}));return Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"\u2116"}),new Array(t[0].length).fill(null).map((function(t,e){return Object(O.jsx)("th",{scope:"col",children:e+1})})),Object(O.jsx)("th",{scope:"col",children:"Sum"})]})})},F=n(16),g=n.n(F),M=n(13),y=n.n(M),R=function(){var t=Object(r.useState)(!1),e=Object(i.a)(t,2),n=e[0],c=e[1],o=Object(a.c)((function(t){return t.matrixReducer.matrix})),u=Object(r.useMemo)((function(){if(!o.length)return null;for(var t=[],e=0;e<o[0].length;e++){for(var n=0,r=0;r<o.length;r++)n+=o[r][e].amount;t=[].concat(Object(m.a)(t),[Math.round(n/o.length)])}return t}),[o]),s=Object(r.useMemo)((function(){return u?u.reduce((function(t,e){return t+e}),0):null}),[u]);return Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"row",children:"Avg"}),null===u||void 0===u?void 0:u.map((function(t){return Object(O.jsx)("th",{className:y.a.row__th,style:n?{background:"linear-gradient(to top, red 0%, #fff ".concat(x(t,s),"%)")}:void 0,scope:"row",children:n?"".concat(x(t,s),"%"):t})})),Object(O.jsx)("th",{className:y.a.row__th,scope:"row",onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:s})]})},C=n(17),S=n.n(C),N=function(t){var e=t.row,n=t.rowName,c=t.rowIndex,o=Object(r.useState)(!1),u=Object(i.a)(o,2),s=u[0],l=u[1],m=f.actions,d=m.deleteRow,b=m.incrementCell,j=m.onCellHover,_=m.onCellLeave,h=Object(a.b)(),p=e.reduce((function(t,e){return t+e.amount}),0),w=Object(r.useCallback)((function(t){return x(t,p)}),[p]),v=Object(a.c)((function(t){return t.matrixReducer.closestIdsArr}));return Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"row",children:n}),e.map((function(t){return Object(O.jsx)("td",{onClick:function(){return h(b(t.id))},onMouseEnter:function(){return h(j(t))},onMouseLeave:function(){return h(_(!0))},style:s?{background:"linear-gradient(to top, red 0%, #fff ".concat(w(t),"%)")}:v.find((function(e){return e.id===t.id}))?{background:"#FFFF00"}:void 0,children:s?"".concat(w(t),"%"):t.amount},t.id)})),Object(O.jsx)("th",{className:S.a.row__th,scope:"row",onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:p}),Object(O.jsx)("i",{onClick:function(){return h(d(c))},className:"material-icons",children:"delete_forever"})]})},k=function(){var t=Object(a.c)((function(t){return t.matrixReducer.matrix}));return Object(O.jsxs)("tbody",{children:[t.map((function(t,e){return Object(O.jsx)(N,{row:t,rowName:e+1,rowIndex:e},t[0].id)})),Object(O.jsx)(R,{})]})},A=function(){var t=Object(a.c)((function(t){return t.matrixReducer.matrix})),e=Object(a.c)((function(t){return t.matrixReducer.columns})),n=Object(a.b)(),r=f.actions.addRow;return Object(O.jsx)("div",{children:t.length?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{type:"button",onClick:function(){return n(r(e))},className:g.a.addRowBtn,children:"Add row"}),Object(O.jsxs)("table",{className:"table myTable",children:[Object(O.jsx)(v,{}),Object(O.jsx)(k,{})]})]}):Object(O.jsx)("span",{children:"At first, set settings for matrix"})})},L=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(w,{}),Object(O.jsx)(A,{})]})},I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),c(t),o(t),a(t)}))},B=Object(d.a)({reducer:{matrixReducer:f.reducer}});o.a.render(Object(O.jsx)(r.StrictMode,{children:Object(O.jsx)(a.a,{store:B,children:Object(O.jsx)(L,{})})}),document.getElementById("root")),I()},9:function(t,e,n){t.exports={matrixForm:"MatrixForm_matrixForm__3wSnc",matrixForm__title:"MatrixForm_matrixForm__title__2ot83",matrixForm__button:"MatrixForm_matrixForm__button__1uEz2",matrixForm__btn:"MatrixForm_matrixForm__btn__3BUMy",addRowBtn:"MatrixForm_addRowBtn__3JZ3d"}}},[[32,1,2]]]);
//# sourceMappingURL=main.2f4636be.chunk.js.map